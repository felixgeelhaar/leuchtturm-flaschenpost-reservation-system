npm warn config cache-max This option has been deprecated in favor of `--prefer-online`
npm warn config shrinkwrap Use the --package-lock setting instead.
npm warn config optional Use `--omit=optional` to exclude optional dependencies, or
npm warn config `--include=optional` to include them.
npm warn config
npm warn config       Default value does install optional deps unless otherwise omitted.

> leuchtturm-flaschenpost-reservation-system@1.0.0 test:coverage
> vitest run --coverage --run --reporter=json

{"numTotalTestSuites":100,"numPassedTestSuites":100,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":245,"numPassedTests":179,"numFailedTests":66,"numPendingTests":0,"numTodoTests":0,"startTime":1754034461993,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["","Reservations API Validation","Form Data Validation"],"fullName":" Reservations API Validation Form Data Validation validates email format","status":"passed","title":"validates email format","duration":1,"failureMessages":[]},{"ancestorTitles":["","Reservations API Validation","Form Data Validation"],"fullName":" Reservations API Validation Form Data Validation validates phone number format","status":"failed","title":"validates phone number format","duration":5,"failureMessages":["expected true to be false // Object.is equality"],"location":{"line":56,"column":40}},{"ancestorTitles":["","Reservations API Validation","Form Data Validation"],"fullName":" Reservations API Validation Form Data Validation validates required field presence","status":"passed","title":"validates required field presence","duration":1,"failureMessages":[]},{"ancestorTitles":["","Reservations API Validation","Form Data Validation"],"fullName":" Reservations API Validation Form Data Validation validates delivery method constraints","status":"passed","title":"validates delivery method constraints","duration":0,"failureMessages":[]},{"ancestorTitles":["","Reservations API Validation","Form Data Validation"],"fullName":" Reservations API Validation Form Data Validation validates supported countries","status":"passed","title":"validates supported countries","duration":0,"failureMessages":[]},{"ancestorTitles":["","Reservations API Validation","Form Data Validation"],"fullName":" Reservations API Validation Form Data Validation validates quantity constraints","status":"passed","title":"validates quantity constraints","duration":0,"failureMessages":[]},{"ancestorTitles":["","Reservations API Validation","Rate Limiting Logic"],"fullName":" Reservations API Validation Rate Limiting Logic implements rate limiting logic","status":"passed","title":"implements rate limiting logic","duration":0,"failureMessages":[]},{"ancestorTitles":["","Reservations API Validation","Security Headers"],"fullName":" Reservations API Validation Security Headers validates security header values","status":"passed","title":"validates security header values","duration":1,"failureMessages":[]},{"ancestorTitles":["","Reservations API Validation","Error Response Format"],"fullName":" Reservations API Validation Error Response Format validates error response structure","status":"passed","title":"validates error response structure","duration":0,"failureMessages":[]},{"ancestorTitles":["","Reservations API Validation","Success Response Format"],"fullName":" Reservations API Validation Success Response Format validates success response structure","status":"passed","title":"validates success response structure","duration":0,"failureMessages":[]}],"startTime":1754034465178,"endTime":1754034465186,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/api/reservations-simple.test.ts"},{"assertionResults":[{"ancestorTitles":["","Reservations API - Simple Tests"],"fullName":" Reservations API - Simple Tests creates a reservation successfully","status":"failed","title":"creates a reservation successfully","duration":27,"failureMessages":["expected 400 to be 201 // Object.is equality"],"location":{"line":91,"column":29}},{"ancestorTitles":["","Reservations API - Simple Tests"],"fullName":" Reservations API - Simple Tests validates required fields","status":"passed","title":"validates required fields","duration":2,"failureMessages":[]},{"ancestorTitles":["","Reservations API - Simple Tests"],"fullName":" Reservations API - Simple Tests checks magazine availability","status":"passed","title":"checks magazine availability","duration":1,"failureMessages":[]},{"ancestorTitles":["","Reservations API - Simple Tests"],"fullName":" Reservations API - Simple Tests handles non-existent magazine","status":"failed","title":"handles non-existent magazine","duration":1,"failureMessages":["expected 400 to be 404 // Object.is equality"],"location":{"line":170,"column":29}},{"ancestorTitles":["","Reservations API - Simple Tests"],"fullName":" Reservations API - Simple Tests validates content type","status":"passed","title":"validates content type","duration":1,"failureMessages":[]},{"ancestorTitles":["","Reservations API - Simple Tests"],"fullName":" Reservations API - Simple Tests sends confirmation email","status":"failed","title":"sends confirmation email","duration":1,"failureMessages":["expected \"spy\" to be called at least once"],"location":{"line":211,"column":58}},{"ancestorTitles":["","Reservations API - Simple Tests"],"fullName":" Reservations API - Simple Tests validates shipping address when delivery method is shipping","status":"failed","title":"validates shipping address when delivery method is shipping","duration":1,"failureMessages":["expected 429 to be 400 // Object.is equality"],"location":{"line":235,"column":29}},{"ancestorTitles":["","Reservations API - Simple Tests"],"fullName":" Reservations API - Simple Tests includes security headers in response","status":"failed","title":"includes security headers in response","duration":0,"failureMessages":["expected null to be 'nosniff' // Object.is equality"],"location":{"line":260,"column":60}}],"startTime":1754034465024,"endTime":1754034465058,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/api/reservations.simple.test.ts"},{"assertionResults":[{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations creates reservation with pickup delivery method","status":"passed","title":"creates reservation with pickup delivery method","duration":68,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations creates reservation with shipping delivery method","status":"passed","title":"creates reservation with shipping delivery method","duration":6,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles existing user","status":"passed","title":"handles existing user","duration":9,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates required fields","status":"passed","title":"validates required fields","duration":14,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates pickup location for pickup delivery","status":"passed","title":"validates pickup location for pickup delivery","duration":33,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates address for shipping delivery","status":"passed","title":"validates address for shipping delivery","duration":11,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates supported countries for shipping","status":"passed","title":"validates supported countries for shipping","duration":20,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations checks magazine availability","status":"passed","title":"checks magazine availability","duration":17,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles non-existent magazine","status":"passed","title":"handles non-existent magazine","duration":5,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates content type","status":"passed","title":"validates content type","duration":20,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles invalid JSON","status":"passed","title":"handles invalid JSON","duration":6,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles database errors gracefully","status":"passed","title":"handles database errors gracefully","duration":3,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations includes security headers in response","status":"passed","title":"includes security headers in response","duration":8,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates phone number format","status":"failed","title":"validates phone number format","duration":19,"failureMessages":["expected 201 to be 400 // Object.is equality"],"location":{"line":417,"column":31}},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates quantity limits","status":"passed","title":"validates quantity limits","duration":2,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates magazine ID format","status":"passed","title":"validates magazine ID format","duration":5,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates pickup date must be in future","status":"passed","title":"validates pickup date must be in future","duration":3,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles missing shipping address when delivery method is shipping","status":"passed","title":"handles missing shipping address when delivery method is shipping","duration":6,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates postal code format","status":"passed","title":"validates postal code format","duration":5,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles existing user with valid consent","status":"passed","title":"handles existing user with valid consent","duration":4,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles database errors in user creation gracefully","status":"passed","title":"handles database errors in user creation gracefully","duration":2,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles database errors in reservation creation gracefully","status":"passed","title":"handles database errors in reservation creation gracefully","duration":1,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles consent recording errors gracefully","status":"passed","title":"handles consent recording errors gracefully","duration":5,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles missing client IP address","status":"passed","title":"handles missing client IP address","duration":8,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles notes field properly","status":"passed","title":"handles notes field properly","duration":3,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates maximum notes length","status":"passed","title":"validates maximum notes length","duration":2,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles edge case with exactly available copies","status":"passed","title":"handles edge case with exactly available copies","duration":5,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles address line 2 optional field","status":"passed","title":"handles address line 2 optional field","duration":9,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations validates deliveryMethod enum","status":"passed","title":"validates deliveryMethod enum","duration":7,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations logs data processing on error","status":"passed","title":"logs data processing on error","duration":4,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles logging errors gracefully","status":"passed","title":"handles logging errors gracefully","duration":4,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations implements rate limiting","status":"failed","title":"implements rate limiting","duration":5,"failureMessages":["expected 500 to be 201 // Object.is equality"],"location":{"line":851,"column":33}},{"ancestorTitles":["","/api/reservations","POST /api/reservations"],"fullName":" /api/reservations POST /api/reservations handles different IP addresses for rate limiting","status":"passed","title":"handles different IP addresses for rate limiting","duration":11,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","GET /api/reservations"],"fullName":" /api/reservations GET /api/reservations returns authentication required message","status":"passed","title":"returns authentication required message","duration":5,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","GET /api/reservations"],"fullName":" /api/reservations GET /api/reservations handles errors in GET endpoint","status":"passed","title":"handles errors in GET endpoint","duration":3,"failureMessages":[]},{"ancestorTitles":["","/api/reservations","GET /api/reservations"],"fullName":" /api/reservations GET /api/reservations handles missing IP in GET request","status":"passed","title":"handles missing IP in GET request","duration":4,"failureMessages":[]}],"startTime":1754034463254,"endTime":1754034463597,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/api/reservations.test.ts"},{"assertionResults":[{"ancestorTitles":["","DatabaseService - Simple Tests","Magazine Operations"],"fullName":" DatabaseService - Simple Tests Magazine Operations should get active magazines","status":"failed","title":"should get active magazines","duration":6,"failureMessages":["this.supabase.from(...).select(...).eq(...).gt is not a function"],"location":{"line":89,"column":8}},{"ancestorTitles":["","DatabaseService - Simple Tests","Magazine Operations"],"fullName":" DatabaseService - Simple Tests Magazine Operations should get magazine by ID","status":"failed","title":"should get magazine by ID","duration":5,"failureMessages":["expected { id: undefined, …(10) } to deeply equal { id: 'mag-123', …(1) }"],"location":{"line":72,"column":24}},{"ancestorTitles":["","DatabaseService - Simple Tests","Magazine Operations"],"fullName":" DatabaseService - Simple Tests Magazine Operations should handle magazine not found","status":"failed","title":"should handle magazine not found","duration":0,"failureMessages":["expected { id: 'mag-123', …(10) } to be null"],"location":{"line":84,"column":24}},{"ancestorTitles":["","DatabaseService - Simple Tests","User Operations"],"fullName":" DatabaseService - Simple Tests User Operations should get user by email","status":"failed","title":"should get user by email","duration":0,"failureMessages":["Failed to get user: Not found"],"location":{"line":66,"column":13}},{"ancestorTitles":["","DatabaseService - Simple Tests","User Operations"],"fullName":" DatabaseService - Simple Tests User Operations should create a new user","status":"failed","title":"should create a new user","duration":1,"failureMessages":["expected { id: 'user-123', …(10) } to deeply equal { id: 'user-456', …(4) }"],"location":{"line":125,"column":20}},{"ancestorTitles":["","DatabaseService - Simple Tests","User Operations"],"fullName":" DatabaseService - Simple Tests User Operations should update user activity","status":"passed","title":"should update user activity","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService - Simple Tests","Reservation Operations"],"fullName":" DatabaseService - Simple Tests Reservation Operations should create a reservation","status":"failed","title":"should create a reservation","duration":1,"failureMessages":["expected { id: 'user-123', …(12) } to deeply equal { id: 'res-123', status: 'pending' }"],"location":{"line":182,"column":27}},{"ancestorTitles":["","DatabaseService - Simple Tests","Reservation Operations"],"fullName":" DatabaseService - Simple Tests Reservation Operations should handle reservation creation error","status":"passed","title":"should handle reservation creation error","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService - Simple Tests","Consent Operations"],"fullName":" DatabaseService - Simple Tests Consent Operations should record consent","status":"passed","title":"should record consent","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService - Simple Tests","Consent Operations"],"fullName":" DatabaseService - Simple Tests Consent Operations should get user consents","status":"failed","title":"should get user consents","duration":1,"failureMessages":["expected [ { id: undefined, …(8) }, …(1) ] to deeply equal [ …(2) ]"],"location":{"line":257,"column":24}},{"ancestorTitles":["","DatabaseService - Simple Tests","Data Processing Logs"],"fullName":" DatabaseService - Simple Tests Data Processing Logs should log data processing","status":"passed","title":"should log data processing","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService - Simple Tests","Data Processing Logs"],"fullName":" DatabaseService - Simple Tests Data Processing Logs should handle anonymous logging","status":"passed","title":"should handle anonymous logging","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService - Simple Tests","Error Handling"],"fullName":" DatabaseService - Simple Tests Error Handling should handle database connection errors","status":"failed","title":"should handle database connection errors","duration":1,"failureMessages":["this.supabase.from(...).select(...).eq(...).gt is not a function"],"location":{"line":89,"column":8}},{"ancestorTitles":["","DatabaseService - Simple Tests","Error Handling"],"fullName":" DatabaseService - Simple Tests Error Handling should handle invalid data errors","status":"passed","title":"should handle invalid data errors","duration":0,"failureMessages":[]}],"startTime":1754034464127,"endTime":1754034464144,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/lib/database.simple.test.ts"},{"assertionResults":[{"ancestorTitles":["","DatabaseService","User Operations"],"fullName":" DatabaseService User Operations creates a new user with address","status":"passed","title":"creates a new user with address","duration":2,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","User Operations"],"fullName":" DatabaseService User Operations creates a new user without address","status":"passed","title":"creates a new user without address","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","User Operations"],"fullName":" DatabaseService User Operations handles user creation errors","status":"passed","title":"handles user creation errors","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","User Operations"],"fullName":" DatabaseService User Operations gets user by email","status":"passed","title":"gets user by email","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","User Operations"],"fullName":" DatabaseService User Operations returns null for non-existent user","status":"passed","title":"returns null for non-existent user","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","User Operations"],"fullName":" DatabaseService User Operations updates user activity","status":"passed","title":"updates user activity","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","Magazine Operations"],"fullName":" DatabaseService Magazine Operations gets active magazines","status":"passed","title":"gets active magazines","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","Magazine Operations"],"fullName":" DatabaseService Magazine Operations gets magazine by id","status":"passed","title":"gets magazine by id","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","Magazine Operations"],"fullName":" DatabaseService Magazine Operations returns null for non-existent magazine","status":"passed","title":"returns null for non-existent magazine","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","Reservation Operations"],"fullName":" DatabaseService Reservation Operations creates reservation with pickup delivery","status":"passed","title":"creates reservation with pickup delivery","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","Reservation Operations"],"fullName":" DatabaseService Reservation Operations creates reservation with shipping delivery","status":"failed","title":"creates reservation with shipping delivery","duration":9,"failureMessages":["expected \"spy\" to be called with arguments: [ { user_id: 'user-123', …(14) } ]\n\nReceived: \n\n  1st spy call:\n\n  Array [\n    Object {\n-     \"consent_reference\": Any<String>,\n+     \"consent_reference\": \"consent-user-123-1754034463274\",\n      \"delivery_method\": \"shipping\",\n-     \"expires_at\": Any<String>,\n+     \"expires_at\": \"2025-08-08T07:47:43.274Z\",\n      \"magazine_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n      \"notes\": \"Please ring the doorbell\",\n-     \"pickup_date\": undefined,\n+     \"pickup_date\": null,\n      \"pickup_location\": null,\n      \"quantity\": 2,\n      \"shipping_address_line2\": \"Apartment 5\",\n      \"shipping_city\": \"Berlin\",\n      \"shipping_country\": \"DE\",\n      \"shipping_house_number\": \"123\",\n      \"shipping_postal_code\": \"10115\",\n      \"shipping_street\": \"Musterstraße\",\n      \"user_id\": \"user-123\",\n    },\n  ]\n\n  2nd spy call:\n\n  Array [\n    Object {\n-     \"consent_reference\": Any<String>,\n-     \"delivery_method\": \"shipping\",\n-     \"expires_at\": Any<String>,\n-     \"magazine_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n-     \"notes\": \"Please ring the doorbell\",\n-     \"pickup_date\": undefined,\n-     \"pickup_location\": null,\n-     \"quantity\": 2,\n-     \"shipping_address_line2\": \"Apartment 5\",\n-     \"shipping_city\": \"Berlin\",\n-     \"shipping_country\": \"DE\",\n-     \"shipping_house_number\": \"123\",\n-     \"shipping_postal_code\": \"10115\",\n-     \"shipping_street\": \"Musterstraße\",\n+     \"action\": \"reservation_created\",\n+     \"data_type\": \"reservation\",\n+     \"details\": \"{\\\"reservationId\\\":\\\"reservation-123\\\",\\\"magazineId\\\":\\\"123e4567-e89b-12d3-a456-426614174000\\\",\\\"quantity\\\":2}\",\n+     \"ip_address\": null,\n+     \"legal_basis\": \"consent\",\n+     \"processor_id\": null,\n      \"user_id\": \"user-123\",\n    },\n  ]\n\n\nNumber of calls: 2\n"],"location":{"line":325,"column":36}},{"ancestorTitles":["","DatabaseService","Reservation Operations"],"fullName":" DatabaseService Reservation Operations handles reservation creation for non-existent user","status":"passed","title":"handles reservation creation for non-existent user","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","Reservation Operations"],"fullName":" DatabaseService Reservation Operations gets user reservations","status":"passed","title":"gets user reservations","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","Reservation Operations"],"fullName":" DatabaseService Reservation Operations cancels reservation","status":"failed","title":"cancels reservation","duration":1,"failureMessages":["this.supabase.from(...).update(...).eq(...).eq is not a function"],"location":{"line":209,"column":8}},{"ancestorTitles":["","DatabaseService","GDPR Consent Operations"],"fullName":" DatabaseService GDPR Consent Operations records user consent","status":"passed","title":"records user consent","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","GDPR Consent Operations"],"fullName":" DatabaseService GDPR Consent Operations gets user consents","status":"passed","title":"gets user consents","duration":0,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","GDPR Consent Operations"],"fullName":" DatabaseService GDPR Consent Operations withdraws consent","status":"failed","title":"withdraws consent","duration":1,"failureMessages":["this.supabase.from(...).update(...).eq(...).eq is not a function"],"location":{"line":272,"column":8}},{"ancestorTitles":["","DatabaseService","Data Processing Logs"],"fullName":" DatabaseService Data Processing Logs logs data processing activity","status":"failed","title":"logs data processing activity","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ { user_id: 'user-123', …(7) } ]\n\nReceived: \n\n  1st spy call:\n\n  Array [\n    Object {\n      \"action\": \"created\",\n      \"data_type\": \"user_data\",\n      \"details\": \"Test log entry\",\n      \"ip_address\": \"127.0.0.1\",\n      \"legal_basis\": \"consent\",\n-     \"processor_id\": undefined,\n-     \"timestamp\": Any<String>,\n+     \"processor_id\": null,\n      \"user_id\": \"user-123\",\n    },\n  ]\n\n\nNumber of calls: 1\n"],"location":{"line":505,"column":36}},{"ancestorTitles":["","DatabaseService","Data Processing Logs"],"fullName":" DatabaseService Data Processing Logs handles optional fields in logging","status":"failed","title":"handles optional fields in logging","duration":0,"failureMessages":["expected \"spy\" to be called with arguments: [ { user_id: undefined, …(7) } ]\n\nReceived: \n\n  1st spy call:\n\n  Array [\n    Object {\n      \"action\": \"accessed\",\n      \"data_type\": \"reservation\",\n-     \"details\": undefined,\n-     \"ip_address\": undefined,\n+     \"details\": null,\n+     \"ip_address\": null,\n      \"legal_basis\": \"legitimate_interest\",\n-     \"processor_id\": undefined,\n-     \"timestamp\": Any<String>,\n-     \"user_id\": undefined,\n+     \"processor_id\": null,\n+     \"user_id\": null,\n    },\n  ]\n\n\nNumber of calls: 1\n"],"location":{"line":526,"column":36}},{"ancestorTitles":["","DatabaseService","Error Handling"],"fullName":" DatabaseService Error Handling handles database connection errors","status":"passed","title":"handles database connection errors","duration":1,"failureMessages":[]},{"ancestorTitles":["","DatabaseService","Error Handling"],"fullName":" DatabaseService Error Handling handles insert errors","status":"passed","title":"handles insert errors","duration":0,"failureMessages":[]}],"startTime":1754034463267,"endTime":1754034463289,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/lib/database.test.ts"},{"assertionResults":[{"ancestorTitles":["","EmailService","verifyConnection"],"fullName":" EmailService verifyConnection should verify email connection successfully","status":"failed","title":"should verify email connection successfully","duration":5,"failureMessages":["expected \"spy\" to be called at least once"],"location":{"line":103,"column":26}},{"ancestorTitles":["","EmailService","verifyConnection"],"fullName":" EmailService verifyConnection should handle verification failure","status":"failed","title":"should handle verification failure","duration":3,"failureMessages":["expected true to be false // Object.is equality"],"location":{"line":111,"column":22}},{"ancestorTitles":["","EmailService","sendReservationConfirmation"],"fullName":" EmailService sendReservationConfirmation should send pickup confirmation email","status":"failed","title":"should send pickup confirmation email","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ ObjectContaining{…} ]\n\nReceived: \n\n\n\nNumber of calls: 0\n"],"location":{"line":123,"column":28}},{"ancestorTitles":["","EmailService","sendReservationConfirmation"],"fullName":" EmailService sendReservationConfirmation should send shipping confirmation email","status":"failed","title":"should send shipping confirmation email","duration":0,"failureMessages":["expected \"spy\" to be called with arguments: [ ObjectContaining{…} ]\n\nReceived: \n\n\n\nNumber of calls: 0\n"],"location":{"line":141,"column":28}},{"ancestorTitles":["","EmailService","sendReservationConfirmation"],"fullName":" EmailService sendReservationConfirmation should include pickup location in pickup confirmation","status":"failed","title":"should include pickup location in pickup confirmation","duration":0,"failureMessages":["Cannot read properties of undefined (reading '0')"],"location":{"line":156,"column":49}},{"ancestorTitles":["","EmailService","sendReservationConfirmation"],"fullName":" EmailService sendReservationConfirmation should include shipping address in shipping confirmation","status":"failed","title":"should include shipping address in shipping confirmation","duration":1,"failureMessages":["Cannot read properties of undefined (reading '0')"],"location":{"line":168,"column":49}},{"ancestorTitles":["","EmailService","sendReservationConfirmation"],"fullName":" EmailService sendReservationConfirmation should throw error on email send failure","status":"failed","title":"should throw error on email send failure","duration":0,"failureMessages":["promise resolved \"undefined\" instead of rejecting"],"location":{"line":182,"column":7}},{"ancestorTitles":["","EmailService","sendReservationCancellation"],"fullName":" EmailService sendReservationCancellation should send cancellation email","status":"failed","title":"should send cancellation email","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ ObjectContaining{…} ]\n\nReceived: \n\n\n\nNumber of calls: 0\n"],"location":{"line":194,"column":28}},{"ancestorTitles":["","EmailService","sendReservationCancellation"],"fullName":" EmailService sendReservationCancellation should not throw on cancellation email failure","status":"passed","title":"should not throw on cancellation email failure","duration":0,"failureMessages":[]},{"ancestorTitles":["","EmailService","sendPickupReminder"],"fullName":" EmailService sendPickupReminder should send pickup reminder email","status":"failed","title":"should send pickup reminder email","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ ObjectContaining{…} ]\n\nReceived: \n\n\n\nNumber of calls: 0\n"],"location":{"line":225,"column":28}},{"ancestorTitles":["","EmailService","sendPickupReminder"],"fullName":" EmailService sendPickupReminder should skip reminder for shipping reservations","status":"passed","title":"should skip reminder for shipping reservations","duration":0,"failureMessages":[]},{"ancestorTitles":["","EmailService","sendPickupReminder"],"fullName":" EmailService sendPickupReminder should skip reminder without pickup details","status":"passed","title":"should skip reminder without pickup details","duration":0,"failureMessages":[]},{"ancestorTitles":["","EmailService","Email content"],"fullName":" EmailService Email content should include reservation ID in confirmation email","status":"failed","title":"should include reservation ID in confirmation email","duration":0,"failureMessages":["Cannot read properties of undefined (reading '0')"],"location":{"line":268,"column":49}},{"ancestorTitles":["","EmailService","Email content"],"fullName":" EmailService Email content should include user name in emails","status":"failed","title":"should include user name in emails","duration":1,"failureMessages":["Cannot read properties of undefined (reading '0')"],"location":{"line":280,"column":49}},{"ancestorTitles":["","EmailService","Email content"],"fullName":" EmailService Email content should include magazine details in emails","status":"failed","title":"should include magazine details in emails","duration":0,"failureMessages":["Cannot read properties of undefined (reading '0')"],"location":{"line":292,"column":49}},{"ancestorTitles":["","EmailService","Email content"],"fullName":" EmailService Email content should include quantity in confirmation","status":"failed","title":"should include quantity in confirmation","duration":0,"failureMessages":["Cannot read properties of undefined (reading '0')"],"location":{"line":306,"column":49}}],"startTime":1754034464749,"endTime":1754034464762,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/lib/email-service.test.ts"},{"assertionResults":[{"ancestorTitles":["","Utility Functions","Date Utilities"],"fullName":" Utility Functions Date Utilities calculates future dates correctly","status":"passed","title":"calculates future dates correctly","duration":2,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Date Utilities"],"fullName":" Utility Functions Date Utilities validates date formats","status":"passed","title":"validates date formats","duration":1,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Date Utilities"],"fullName":" Utility Functions Date Utilities calculates retention dates","status":"passed","title":"calculates retention dates","duration":1,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","String Utilities"],"fullName":" Utility Functions String Utilities validates and sanitizes input strings","status":"passed","title":"validates and sanitizes input strings","duration":1,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","String Utilities"],"fullName":" Utility Functions String Utilities validates string lengths","status":"passed","title":"validates string lengths","duration":0,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","String Utilities"],"fullName":" Utility Functions String Utilities generates reference IDs","status":"passed","title":"generates reference IDs","duration":11,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Validation Utilities"],"fullName":" Utility Functions Validation Utilities validates UUID format","status":"passed","title":"validates UUID format","duration":1,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Validation Utilities"],"fullName":" Utility Functions Validation Utilities validates postal codes","status":"passed","title":"validates postal codes","duration":0,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Validation Utilities"],"fullName":" Utility Functions Validation Utilities validates quantity constraints","status":"passed","title":"validates quantity constraints","duration":0,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Array and Object Utilities"],"fullName":" Utility Functions Array and Object Utilities safely accesses nested properties","status":"passed","title":"safely accesses nested properties","duration":0,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Array and Object Utilities"],"fullName":" Utility Functions Array and Object Utilities filters and maps arrays correctly","status":"passed","title":"filters and maps arrays correctly","duration":1,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Array and Object Utilities"],"fullName":" Utility Functions Array and Object Utilities groups objects by property","status":"passed","title":"groups objects by property","duration":1,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Error Handling Utilities"],"fullName":" Utility Functions Error Handling Utilities creates standardized error responses","status":"passed","title":"creates standardized error responses","duration":0,"failureMessages":[]},{"ancestorTitles":["","Utility Functions","Error Handling Utilities"],"fullName":" Utility Functions Error Handling Utilities handles async errors gracefully","status":"passed","title":"handles async errors gracefully","duration":1,"failureMessages":[]}],"startTime":1754034464240,"endTime":1754034464262,"status":"passed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/lib/utils.test.ts"},{"assertionResults":[{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Basic Rendering"],"fullName":" ConsentBanner Component - Focused Tests Basic Rendering should render banner when no consent is saved","status":"passed","title":"should render banner when no consent is saved","duration":118,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Basic Rendering"],"fullName":" ConsentBanner Component - Focused Tests Basic Rendering should not render banner when consent exists and is valid","status":"passed","title":"should not render banner when consent exists and is valid","duration":10,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Basic Rendering"],"fullName":" ConsentBanner Component - Focused Tests Basic Rendering should render banner when consent is expired","status":"passed","title":"should render banner when consent is expired","duration":5,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Consent Actions"],"fullName":" ConsentBanner Component - Focused Tests Consent Actions should accept all cookies when \"Alle akzeptieren\" is clicked","status":"passed","title":"should accept all cookies when \"Alle akzeptieren\" is clicked","duration":7,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Consent Actions"],"fullName":" ConsentBanner Component - Focused Tests Consent Actions should accept only necessary cookies when \"Nur notwendige\" is clicked","status":"passed","title":"should accept only necessary cookies when \"Nur notwendige\" is clicked","duration":6,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Consent Actions"],"fullName":" ConsentBanner Component - Focused Tests Consent Actions should open detailed settings when \"Einstellungen\" is clicked","status":"passed","title":"should open detailed settings when \"Einstellungen\" is clicked","duration":16,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Local Storage Management"],"fullName":" ConsentBanner Component - Focused Tests Local Storage Management should save consent with correct format","status":"passed","title":"should save consent with correct format","duration":9,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Local Storage Management"],"fullName":" ConsentBanner Component - Focused Tests Local Storage Management should load saved consent on mount","status":"passed","title":"should load saved consent on mount","duration":3,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Local Storage Management"],"fullName":" ConsentBanner Component - Focused Tests Local Storage Management should handle corrupted localStorage data gracefully","status":"passed","title":"should handle corrupted localStorage data gracefully","duration":6,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Consent Application"],"fullName":" ConsentBanner Component - Focused Tests Consent Application should apply functional cookie settings","status":"passed","title":"should apply functional cookie settings","duration":12,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Consent Application"],"fullName":" ConsentBanner Component - Focused Tests Consent Application should call gtag for analytics consent","status":"passed","title":"should call gtag for analytics consent","duration":6,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Consent Application"],"fullName":" ConsentBanner Component - Focused Tests Consent Application should call gtag for marketing consent","status":"passed","title":"should call gtag for marketing consent","duration":5,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Consent Application"],"fullName":" ConsentBanner Component - Focused Tests Consent Application should handle missing gtag gracefully","status":"passed","title":"should handle missing gtag gracefully","duration":3,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Server Communication"],"fullName":" ConsentBanner Component - Focused Tests Server Communication should send consent to server","status":"passed","title":"should send consent to server","duration":4,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Server Communication"],"fullName":" ConsentBanner Component - Focused Tests Server Communication should handle server errors gracefully","status":"passed","title":"should handle server errors gracefully","duration":3,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Consent Revocation"],"fullName":" ConsentBanner Component - Focused Tests Consent Revocation should revoke consent and reset to defaults","status":"passed","title":"should revoke consent and reset to defaults","duration":8,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Props and Visibility"],"fullName":" ConsentBanner Component - Focused Tests Props and Visibility should respect isVisible prop","status":"passed","title":"should respect isVisible prop","duration":1,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Props and Visibility"],"fullName":" ConsentBanner Component - Focused Tests Props and Visibility should show banner when isVisible is true and no consent","status":"passed","title":"should show banner when isVisible is true and no consent","duration":3,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Accessibility"],"fullName":" ConsentBanner Component - Focused Tests Accessibility should have proper ARIA attributes for banner","status":"passed","title":"should have proper ARIA attributes for banner","duration":9,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Accessibility"],"fullName":" ConsentBanner Component - Focused Tests Accessibility should provide external link security attributes","status":"passed","title":"should provide external link security attributes","duration":3,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Component API"],"fullName":" ConsentBanner Component - Focused Tests Component API should expose required methods and properties","status":"passed","title":"should expose required methods and properties","duration":3,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Component API"],"fullName":" ConsentBanner Component - Focused Tests Component API should allow external triggering of settings modal","status":"passed","title":"should allow external triggering of settings modal","duration":14,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Error Handling"],"fullName":" ConsentBanner Component - Focused Tests Error Handling should handle localStorage errors gracefully","status":"passed","title":"should handle localStorage errors gracefully","duration":4,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Error Handling"],"fullName":" ConsentBanner Component - Focused Tests Error Handling should handle missing consent properties gracefully","status":"passed","title":"should handle missing consent properties gracefully","duration":3,"failureMessages":[]},{"ancestorTitles":["","ConsentBanner Component - Focused Tests","Cookie Settings Link"],"fullName":" ConsentBanner Component - Focused Tests Cookie Settings Link should show cookie settings link when consent has been given","status":"passed","title":"should show cookie settings link when consent has been given","duration":3,"failureMessages":[]}],"startTime":1754034463553,"endTime":1754034463819,"status":"passed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/components/ConsentBanner.focused.test.ts"},{"assertionResults":[{"ancestorTitles":["","ErrorMessage Component","Rendering"],"fullName":" ErrorMessage Component Rendering should not render when no error is provided","status":"passed","title":"should not render when no error is provided","duration":11,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Rendering"],"fullName":" ErrorMessage Component Rendering should not render when error is null","status":"passed","title":"should not render when error is null","duration":1,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Rendering"],"fullName":" ErrorMessage Component Rendering should not render when error is undefined","status":"passed","title":"should not render when error is undefined","duration":0,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Rendering"],"fullName":" ErrorMessage Component Rendering should render error message when error is provided","status":"passed","title":"should render error message when error is provided","duration":43,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Rendering"],"fullName":" ErrorMessage Component Rendering should have correct CSS classes for styling","status":"passed","title":"should have correct CSS classes for styling","duration":3,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Accessibility"],"fullName":" ErrorMessage Component Accessibility should have proper ARIA attributes","status":"passed","title":"should have proper ARIA attributes","duration":3,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Accessibility"],"fullName":" ErrorMessage Component Accessibility should be announced to screen readers","status":"passed","title":"should be announced to screen readers","duration":2,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Props"],"fullName":" ErrorMessage Component Props should accept string error prop","status":"passed","title":"should accept string error prop","duration":2,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Props"],"fullName":" ErrorMessage Component Props should handle empty string gracefully","status":"passed","title":"should handle empty string gracefully","duration":1,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Props"],"fullName":" ErrorMessage Component Props should handle whitespace-only strings","status":"passed","title":"should handle whitespace-only strings","duration":3,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Reactivity"],"fullName":" ErrorMessage Component Reactivity should show error when prop changes from empty to error","status":"passed","title":"should show error when prop changes from empty to error","duration":6,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Reactivity"],"fullName":" ErrorMessage Component Reactivity should hide error when prop changes from error to empty","status":"passed","title":"should hide error when prop changes from error to empty","duration":3,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Reactivity"],"fullName":" ErrorMessage Component Reactivity should update error message when prop changes","status":"passed","title":"should update error message when prop changes","duration":5,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Edge Cases"],"fullName":" ErrorMessage Component Edge Cases should handle very long error messages","status":"passed","title":"should handle very long error messages","duration":4,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Edge Cases"],"fullName":" ErrorMessage Component Edge Cases should handle special characters in error messages","status":"passed","title":"should handle special characters in error messages","duration":2,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Edge Cases"],"fullName":" ErrorMessage Component Edge Cases should handle HTML in error messages safely","status":"passed","title":"should handle HTML in error messages safely","duration":2,"failureMessages":[]},{"ancestorTitles":["","ErrorMessage Component","Performance"],"fullName":" ErrorMessage Component Performance should not cause unnecessary re-renders","status":"passed","title":"should not cause unnecessary re-renders","duration":5,"failureMessages":[]}],"startTime":1754034465382,"endTime":1754034465479,"status":"passed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/components/ErrorMessage.test.ts"},{"assertionResults":[{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Initial Rendering"],"fullName":" ReservationForm Component - Basic Functionality Initial Rendering should render the form with all required fields","status":"passed","title":"should render the form with all required fields","duration":82,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Initial Rendering"],"fullName":" ReservationForm Component - Basic Functionality Initial Rendering should display magazine options correctly","status":"failed","title":"should display magazine options correctly","duration":38,"failureMessages":["expected [ DOMWrapper{ …(2) } ] to have a length of 3 but got 1"],"location":{"line":49,"column":23}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Initial Rendering"],"fullName":" ReservationForm Component - Basic Functionality Initial Rendering should have pickup as default delivery method","status":"passed","title":"should have pickup as default delivery method","duration":12,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Initial Rendering"],"fullName":" ReservationForm Component - Basic Functionality Initial Rendering should show pickup location field by default","status":"passed","title":"should show pickup location field by default","duration":62,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Initial Rendering"],"fullName":" ReservationForm Component - Basic Functionality Initial Rendering should not show shipping address fields by default","status":"passed","title":"should not show shipping address fields by default","duration":23,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Field Behavior"],"fullName":" ReservationForm Component - Basic Functionality Form Field Behavior should update form data when fields are filled","status":"passed","title":"should update form data when fields are filled","duration":36,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Field Behavior"],"fullName":" ReservationForm Component - Basic Functionality Form Field Behavior should show shipping fields when delivery method is changed to shipping","status":"passed","title":"should show shipping fields when delivery method is changed to shipping","duration":48,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Field Behavior"],"fullName":" ReservationForm Component - Basic Functionality Form Field Behavior should hide pickup location when delivery method is changed to shipping","status":"passed","title":"should hide pickup location when delivery method is changed to shipping","duration":46,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Field Behavior"],"fullName":" ReservationForm Component - Basic Functionality Form Field Behavior should update quantity options based on selected magazine","status":"failed","title":"should update quantity options based on selected magazine","duration":48,"failureMessages":["expected [ DOMWrapper{ …(2) } ] to have a length of 5 but got 1"],"location":{"line":145,"column":23}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Field Behavior"],"fullName":" ReservationForm Component - Basic Functionality Form Field Behavior should show magazine details when a magazine is selected","status":"failed","title":"should show magazine details when a magazine is selected","duration":25,"failureMessages":["expected 'Datenschutz und Einverständniserkläru…' to contain 'Flaschenpost'"],"location":{"line":163,"column":38}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Validation"],"fullName":" ReservationForm Component - Basic Functionality Form Validation should show validation errors for empty required fields","status":"failed","title":"should show validation errors for empty required fields","duration":43,"failureMessages":["expected [] to not have a length of +0"],"location":{"line":180,"column":54}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Validation"],"fullName":" ReservationForm Component - Basic Functionality Form Validation should validate email format","status":"failed","title":"should validate email format","duration":40,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":197,"column":67}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Validation"],"fullName":" ReservationForm Component - Basic Functionality Form Validation should require essential consent","status":"failed","title":"should require essential consent","duration":24,"failureMessages":["expected [] to not have a length of +0"],"location":{"line":217,"column":54}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Validation"],"fullName":" ReservationForm Component - Basic Functionality Form Validation should require pickup location when delivery method is pickup","status":"failed","title":"should require pickup location when delivery method is pickup","duration":89,"failureMessages":["expected [] to not have a length of +0"],"location":{"line":239,"column":54}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Validation"],"fullName":" ReservationForm Component - Basic Functionality Form Validation should require address fields when delivery method is shipping","status":"failed","title":"should require address fields when delivery method is shipping","duration":86,"failureMessages":["expected [] to not have a length of +0"],"location":{"line":261,"column":54}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Submission"],"fullName":" ReservationForm Component - Basic Functionality Form Submission should disable submit button during submission","status":"passed","title":"should disable submit button during submission","duration":49,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Submission"],"fullName":" ReservationForm Component - Basic Functionality Form Submission should show loading state during submission","status":"failed","title":"should show loading state during submission","duration":122,"failureMessages":["expected 'Reservierung absenden' to contain 'Wird verarbeitet'"],"location":{"line":320,"column":35}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Submission"],"fullName":" ReservationForm Component - Basic Functionality Form Submission should show success message on successful submission","status":"failed","title":"should show success message on successful submission","duration":78,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":349,"column":39}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Submission"],"fullName":" ReservationForm Component - Basic Functionality Form Submission should show error message on failed submission","status":"failed","title":"should show error message on failed submission","duration":65,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":379,"column":37}},{"ancestorTitles":["","ReservationForm Component - Basic Functionality","Form Reset"],"fullName":" ReservationForm Component - Basic Functionality Form Reset should reset form when reset button is clicked","status":"passed","title":"should reset form when reset button is clicked","duration":34,"failureMessages":[]}],"startTime":1754034463660,"endTime":1754034464710,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/components/ReservationForm.basic.test.ts"},{"assertionResults":[{"ancestorTitles":["","ReservationForm Component - Focused Tests","Basic Rendering"],"fullName":" ReservationForm Component - Focused Tests Basic Rendering should render the form with correct title","status":"passed","title":"should render the form with correct title","duration":79,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Basic Rendering"],"fullName":" ReservationForm Component - Focused Tests Basic Rendering should render form fields correctly","status":"passed","title":"should render form fields correctly","duration":29,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Basic Rendering"],"fullName":" ReservationForm Component - Focused Tests Basic Rendering should populate magazine select options","status":"failed","title":"should populate magazine select options","duration":26,"failureMessages":["expected 1 to be greater than 1"],"location":{"line":85,"column":30}},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form Validation"],"fullName":" ReservationForm Component - Focused Tests Form Validation should validate required fields and show errors","status":"passed","title":"should validate required fields and show errors","duration":66,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form Validation"],"fullName":" ReservationForm Component - Focused Tests Form Validation should validate email format","status":"passed","title":"should validate email format","duration":51,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form Validation"],"fullName":" ReservationForm Component - Focused Tests Form Validation should require essential consent","status":"failed","title":"should require essential consent","duration":82,"failureMessages":["the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string"],"location":{"line":142,"column":46}},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Conditional Rendering"],"fullName":" ReservationForm Component - Focused Tests Conditional Rendering should show pickup location field when pickup is selected","status":"passed","title":"should show pickup location field when pickup is selected","duration":14,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Conditional Rendering"],"fullName":" ReservationForm Component - Focused Tests Conditional Rendering should show shipping address fields when shipping is selected","status":"passed","title":"should show shipping address fields when shipping is selected","duration":75,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Magazine Selection"],"fullName":" ReservationForm Component - Focused Tests Magazine Selection should show magazine details when selected","status":"failed","title":"should show magazine details when selected","duration":15,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Winter edition with special features'"],"location":{"line":187,"column":30}},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Magazine Selection"],"fullName":" ReservationForm Component - Focused Tests Magazine Selection should update quantity options based on selected magazine","status":"passed","title":"should update quantity options based on selected magazine","duration":31,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form State Management"],"fullName":" ReservationForm Component - Focused Tests Form State Management should initialize with default values","status":"passed","title":"should initialize with default values","duration":20,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form State Management"],"fullName":" ReservationForm Component - Focused Tests Form State Management should apply initial data when provided","status":"passed","title":"should apply initial data when provided","duration":33,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form State Management"],"fullName":" ReservationForm Component - Focused Tests Form State Management should reset form when reset button is clicked","status":"passed","title":"should reset form when reset button is clicked","duration":57,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form Computed Properties"],"fullName":" ReservationForm Component - Focused Tests Form Computed Properties should compute form validity correctly","status":"failed","title":"should compute form validity correctly","duration":90,"failureMessages":["expected false to be true // Object.is equality"],"location":{"line":293,"column":38}},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form Computed Properties"],"fullName":" ReservationForm Component - Focused Tests Form Computed Properties should compute max quantity correctly","status":"failed","title":"should compute max quantity correctly","duration":61,"failureMessages":["expected 1 to be 5 // Object.is equality"],"location":{"line":306,"column":38}},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Form Computed Properties"],"fullName":" ReservationForm Component - Focused Tests Form Computed Properties should compute date constraints correctly","status":"passed","title":"should compute date constraints correctly","duration":22,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Error Handling"],"fullName":" ReservationForm Component - Focused Tests Error Handling should handle magazine fetch failure gracefully","status":"failed","title":"should handle magazine fetch failure gracefully","duration":30,"failureMessages":["expected \"spy\" to be called with arguments: [ 'Failed to fetch magazines:', …(1) ]\n\nReceived: \n\n\n\nNumber of calls: 0\n"],"location":{"line":335,"column":26}},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Error Handling"],"fullName":" ReservationForm Component - Focused Tests Error Handling should clear related errors when delivery method changes","status":"passed","title":"should clear related errors when delivery method changes","duration":56,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Accessibility"],"fullName":" ReservationForm Component - Focused Tests Accessibility should have proper form labels","status":"passed","title":"should have proper form labels","duration":33,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Accessibility"],"fullName":" ReservationForm Component - Focused Tests Accessibility should have proper fieldset structure","status":"passed","title":"should have proper fieldset structure","duration":9,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Accessibility"],"fullName":" ReservationForm Component - Focused Tests Accessibility should mark required fields appropriately","status":"passed","title":"should mark required fields appropriately","duration":23,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Character Counting"],"fullName":" ReservationForm Component - Focused Tests Character Counting should show character count for notes field","status":"passed","title":"should show character count for notes field","duration":10,"failureMessages":[]},{"ancestorTitles":["","ReservationForm Component - Focused Tests","Date Formatting"],"fullName":" ReservationForm Component - Focused Tests Date Formatting should format dates correctly for display","status":"passed","title":"should format dates correctly for display","duration":64,"failureMessages":[]}],"startTime":1754034463785,"endTime":1754034464763,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/components/ReservationForm.focused.test.ts"},{"assertionResults":[{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests renders the form","status":"passed","title":"renders the form","duration":41,"failureMessages":[]},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests has all required form fields","status":"passed","title":"has all required form fields","duration":16,"failureMessages":[]},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests shows pickup fields when delivery method is pickup","status":"passed","title":"shows pickup fields when delivery method is pickup","duration":20,"failureMessages":[]},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests shows address fields when delivery method is shipping","status":"passed","title":"shows address fields when delivery method is shipping","duration":21,"failureMessages":[]},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests has consent checkboxes","status":"passed","title":"has consent checkboxes","duration":14,"failureMessages":[]},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests has submit and reset buttons","status":"passed","title":"has submit and reset buttons","duration":13,"failureMessages":[]},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests updates form data when fields change","status":"passed","title":"updates form data when fields change","duration":17,"failureMessages":[]},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests can select quantity","status":"failed","title":"can select quantity","duration":20,"failureMessages":["expected '' to be '2' // Object.is equality"],"location":{"line":114,"column":65}},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests shows notes textarea","status":"passed","title":"shows notes textarea","duration":13,"failureMessages":[]},{"ancestorTitles":["","ReservationForm - Simple Tests"],"fullName":" ReservationForm - Simple Tests essential consent is unchecked by default","status":"passed","title":"essential consent is unchecked by default","duration":11,"failureMessages":[]}],"startTime":1754034465744,"endTime":1754034465930,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/components/ReservationForm.simple.test.ts"},{"assertionResults":[{"ancestorTitles":["","ReservationForm.vue","Component Rendering"],"fullName":" ReservationForm.vue Component Rendering renders the form with all required fields","status":"passed","title":"renders the form with all required fields","duration":85,"failureMessages":[]},{"ancestorTitles":["","ReservationForm.vue","Component Rendering"],"fullName":" ReservationForm.vue Component Rendering renders magazine options correctly","status":"failed","title":"renders magazine options correctly","duration":29,"failureMessages":["expected [ DOMWrapper{ …(2) } ] to have a length of 3 but got 1"],"location":{"line":55,"column":23}},{"ancestorTitles":["","ReservationForm.vue","Component Rendering"],"fullName":" ReservationForm.vue Component Rendering shows pickup location when delivery method is pickup","status":"passed","title":"shows pickup location when delivery method is pickup","duration":58,"failureMessages":[]},{"ancestorTitles":["","ReservationForm.vue","Component Rendering"],"fullName":" ReservationForm.vue Component Rendering shows address fields when delivery method is shipping","status":"passed","title":"shows address fields when delivery method is shipping","duration":32,"failureMessages":[]},{"ancestorTitles":["","ReservationForm.vue","Form Validation"],"fullName":" ReservationForm.vue Form Validation validates required fields","status":"failed","title":"validates required fields","duration":20,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Vorname muss mindestens 2 Zeichen lan…'"],"location":{"line":104,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Form Validation"],"fullName":" ReservationForm.vue Form Validation validates email format","status":"failed","title":"validates email format","duration":41,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Bitte geben Sie eine gültige E-Mail-A…'"],"location":{"line":120,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Form Validation"],"fullName":" ReservationForm.vue Form Validation validates phone number format","status":"failed","title":"validates phone number format","duration":50,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Bitte geben Sie eine gültige Telefonn…'"],"location":{"line":135,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Form Validation"],"fullName":" ReservationForm.vue Form Validation validates required consent","status":"failed","title":"validates required consent","duration":66,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Erforderliche Einwilligung muss ertei…'"],"location":{"line":153,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Form Validation"],"fullName":" ReservationForm.vue Form Validation validates pickup location when delivery method is pickup","status":"failed","title":"validates pickup location when delivery method is pickup","duration":100,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Bitte wählen Sie einen Abholort'"],"location":{"line":171,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Form Validation"],"fullName":" ReservationForm.vue Form Validation validates address fields when delivery method is shipping","status":"failed","title":"validates address fields when delivery method is shipping","duration":116,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Straße ist erforderlich'"],"location":{"line":193,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Form Submission"],"fullName":" ReservationForm.vue Form Submission submits form with pickup data successfully","status":"failed","title":"submits form with pickup data successfully","duration":66,"failureMessages":["expected \"spy\" to be called with arguments: [ '/api/reservations', …(1) ]\n\nReceived: \n\n\n\nNumber of calls: 0\n"],"location":{"line":209,"column":21}},{"ancestorTitles":["","ReservationForm.vue","Form Submission"],"fullName":" ReservationForm.vue Form Submission submits form with shipping data successfully","status":"failed","title":"submits form with shipping data successfully","duration":155,"failureMessages":["expected \"spy\" to be called with arguments: [ '/api/reservations', …(1) ]\n\nReceived: \n\n\n\nNumber of calls: 0\n"],"location":{"line":238,"column":21}},{"ancestorTitles":["","ReservationForm.vue","Form Submission"],"fullName":" ReservationForm.vue Form Submission handles submission errors gracefully","status":"failed","title":"handles submission errors gracefully","duration":129,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Fehler beim Absenden'"],"location":{"line":272,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Form Submission"],"fullName":" ReservationForm.vue Form Submission shows loading state during submission","status":"failed","title":"shows loading state during submission","duration":69,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Wird verarbeitet...'"],"location":{"line":290,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Delivery Method Switching"],"fullName":" ReservationForm.vue Delivery Method Switching clears pickup location when switching to shipping","status":"failed","title":"clears pickup location when switching to shipping","duration":24,"failureMessages":["expected 'Berlin Mitte' to be '' // Object.is equality"],"location":{"line":315,"column":42}},{"ancestorTitles":["","ReservationForm.vue","Delivery Method Switching"],"fullName":" ReservationForm.vue Delivery Method Switching clears address when switching to pickup","status":"passed","title":"clears address when switching to pickup","duration":86,"failureMessages":[]},{"ancestorTitles":["","ReservationForm.vue","Form Reset"],"fullName":" ReservationForm.vue Form Reset resets form to initial state","status":"passed","title":"resets form to initial state","duration":59,"failureMessages":[]},{"ancestorTitles":["","ReservationForm.vue","Magazine Selection"],"fullName":" ReservationForm.vue Magazine Selection updates quantity options based on available copies","status":"failed","title":"updates quantity options based on available copies","duration":14,"failureMessages":["expected [ DOMWrapper{ …(2) } ] to have a length of 5 but got 1"],"location":{"line":382,"column":23}},{"ancestorTitles":["","ReservationForm.vue","Magazine Selection"],"fullName":" ReservationForm.vue Magazine Selection shows magazine details when selected","status":"failed","title":"shows magazine details when selected","duration":20,"failureMessages":["expected 'Flaschenpost Magazin reservieren  Res…' to contain 'Test magazine description'"],"location":{"line":395,"column":30}},{"ancestorTitles":["","ReservationForm.vue","Accessibility"],"fullName":" ReservationForm.vue Accessibility has proper form labels and ARIA attributes","status":"passed","title":"has proper form labels and ARIA attributes","duration":15,"failureMessages":[]},{"ancestorTitles":["","ReservationForm.vue","Accessibility"],"fullName":" ReservationForm.vue Accessibility has proper fieldset and legend elements","status":"passed","title":"has proper fieldset and legend elements","duration":15,"failureMessages":[]}],"startTime":1754034463657,"endTime":1754034464907,"status":"failed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/components/ReservationForm.test.ts"},{"assertionResults":[{"ancestorTitles":["","Type Validation and Guards","ConsentData Validation"],"fullName":" Type Validation and Guards ConsentData Validation validates consent data structure","status":"passed","title":"validates consent data structure","duration":1,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","ConsentData Validation"],"fullName":" Type Validation and Guards ConsentData Validation validates essential consent requirement","status":"passed","title":"validates essential consent requirement","duration":0,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","Address Validation"],"fullName":" Type Validation and Guards Address Validation validates address structure","status":"passed","title":"validates address structure","duration":0,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","Address Validation"],"fullName":" Type Validation and Guards Address Validation validates required address fields for shipping","status":"passed","title":"validates required address fields for shipping","duration":0,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","Address Validation"],"fullName":" Type Validation and Guards Address Validation validates supported countries","status":"passed","title":"validates supported countries","duration":0,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","ReservationFormData Validation"],"fullName":" Type Validation and Guards ReservationFormData Validation validates complete form data structure","status":"passed","title":"validates complete form data structure","duration":1,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","ReservationFormData Validation"],"fullName":" Type Validation and Guards ReservationFormData Validation validates delivery method constraints","status":"passed","title":"validates delivery method constraints","duration":0,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","ReservationFormData Validation"],"fullName":" Type Validation and Guards ReservationFormData Validation validates field length constraints","status":"passed","title":"validates field length constraints","duration":1,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","Type Transformations"],"fullName":" Type Validation and Guards Type Transformations transforms form data to database format","status":"passed","title":"transforms form data to database format","duration":0,"failureMessages":[]},{"ancestorTitles":["","Type Validation and Guards","Type Transformations"],"fullName":" Type Validation and Guards Type Transformations transforms database format to API response","status":"passed","title":"transforms database format to API response","duration":0,"failureMessages":[]}],"startTime":1754034463135,"endTime":1754034463138,"status":"passed","message":"","name":"/Users/felixgeelhaar/Developer/projects/leuchtturm/leuchtturm-flaschenpost-reservation-system/tests/unit/types/validation.test.ts"}]}
